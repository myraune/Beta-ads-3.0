(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{6490:function(e,t,a){Promise.resolve().then(a.bind(a,3727))},6385:function(e,t,a){"use strict";a.d(t,{BrandLogo:function(){return n}});var s=a(2657);function r(e){var t;if(e.startsWith("http://")||e.startsWith("https://"))return e;if(!e.startsWith("/"))throw Error('withBasePath expected an absolute path, received "'.concat(e,'"'));let a=(t="/Beta-ads-3.0").endsWith("/")?t.slice(0,-1):t;return a?"".concat(a).concat(e):e}let l={horizontal:{dark:"/brand/h-logo-light.svg",light:"/brand/h-logo-dark.svg"},mark:{dark:"/brand/brandmark-light.svg",light:"/brand/brandmark-dark.svg"}},i={horizontal:{sm:{width:132,height:32},md:{width:168,height:40},lg:{width:212,height:50}},mark:{sm:{width:24,height:24},md:{width:32,height:32},lg:{width:40,height:40}}};function n(e){var t;let a=null!==(t=e.size)&&void 0!==t?t:"md",n=r(l[e.kind][e.surface]),d=r("horizontal"===e.kind?"/brand/h-logo-light.svg":"/brand/brandmark-light.svg"),o=i[e.kind][a],c="horizontal"===e.kind?"Beta Ads logo":"Beta Ads mark";return(0,s.jsx)("img",{src:n,alt:c,width:o.width,height:o.height,className:e.className,decoding:"async",loading:"eager","data-testid":e.dataTestId,onError:e=>{let t=e.currentTarget;t.src.endsWith(d)||(t.src=d)}})}},3727:function(e,t,a){"use strict";a.d(t,{StreamerWorkspace:function(){return h}});var s=a(2657),r=a(3639),l=a(374),i=a(4094),n=a(9927),d=a(6385);let o=[{id:"general",label:"General",short:"G"},{id:"brief",label:"Brief",short:"B"},{id:"requirements",label:"Requirements",short:"R"},{id:"stream-content",label:"Stream content",short:"S"},{id:"configuration",label:"Configuration",short:"C"}];function c(e){return(0,s.jsxs)("aside",{className:"streamer-card order-1 flex h-full flex-col rounded-2xl p-3 xl:min-h-[calc(100vh-3.5rem)]","data-testid":"streamer-left-nav",children:[(0,s.jsxs)("header",{className:"mb-4 border-b border-white/10 px-2 pb-4",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.24em] text-[var(--streamer-muted)]",children:"Campaign workspace"}),(0,s.jsxs)("div",{className:"streamer-pill mt-3 inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold text-slate-100",children:[(0,s.jsx)("span",{className:"h-2 w-2 rounded-full bg-[var(--streamer-accent)]","aria-hidden":"true"}),"ID ",e.campaignId]}),(0,s.jsx)("h1",{className:"mt-3 text-lg font-semibold leading-tight text-white",children:e.campaignTitle})]}),(0,s.jsx)("nav",{className:"space-y-2",children:o.map((t,a)=>{let r=e.activeSection===t.id;return(0,s.jsxs)("button",{type:"button",className:"group relative flex w-full items-center gap-3 overflow-hidden rounded-xl border px-3 py-2 text-left text-sm font-semibold tracking-wide transition ".concat(r?"border-blue-300/40 bg-blue-500/20 text-white shadow-[inset_0_0_0_1px_rgba(147,197,253,0.6)]":"border-white/15 bg-slate-950/45 text-slate-200 hover:border-white/30 hover:bg-slate-900/80"),onClick:()=>e.onSelect(t.id),"aria-pressed":r,children:[(0,s.jsx)("span",{className:"inline-flex h-7 w-7 items-center justify-center rounded-lg border text-xs font-bold ".concat(r?"border-blue-200/70 bg-blue-500/25 text-blue-100":"border-white/20 bg-black/25 text-slate-300 group-hover:text-white"),"aria-hidden":"true",children:t.short}),(0,s.jsx)("span",{children:t.label}),(0,s.jsxs)("span",{className:"ml-auto text-[10px] text-slate-500",children:["0",a+1]})]},t.id)})}),(0,s.jsx)("div",{className:"mt-auto pt-4",children:(0,s.jsx)("button",{type:"button",className:"w-full rounded-xl border border-white/15 bg-slate-950/40 px-4 py-2 text-sm font-semibold text-slate-100 transition hover:border-white/35",children:"Close workspace"})})]})}function m(e){var t,a,r,l,i,n,d;let o=null!==(i=null===(t=e.flowState)||void 0===t?void 0:t.overlayConnected)&&void 0!==i?i:e.uiState.overlayConnected,c=e.uiState.joined?e.uiState.isPaused?"Resume":"Pause":"Join in sponsorships",m=Math.min(100,Math.round(e.uiState.liveMinutes/20*100));return(0,s.jsxs)("aside",{className:"streamer-card order-3 rounded-2xl p-4 xl:order-none","data-testid":"streamer-right-rail",children:[(0,s.jsx)("button",{type:"button",className:"streamer-primary-btn w-full rounded-xl px-4 py-3 text-base font-semibold text-white transition",onClick:e.onPrimaryAction,children:c}),(0,s.jsxs)("section",{className:"mt-5 border-b border-white/10 pb-5",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.24em] text-[var(--streamer-muted)]",children:"Workflow"}),(0,s.jsx)("ul",{className:"mt-3 space-y-5 border-l border-white/15 pl-6",children:e.workflowSteps.map(e=>{var t,a;return(0,s.jsxs)("li",{className:"relative","data-testid":"workflow-step-".concat(e.id),"data-status":e.status,children:[(0,s.jsx)("span",{className:"absolute -left-[33px] top-[2px] inline-flex h-5 w-5 items-center justify-center rounded-full border text-[11px] font-semibold ".concat("complete"===(t=e.status)?"border-emerald-300/80 bg-emerald-500 text-white":"active"===t?"border-blue-300/80 bg-blue-500 text-white":"border-white/30 bg-slate-950/60 text-transparent"),"aria-hidden":"true",children:"complete"===e.status?"v":"o"}),(0,s.jsx)("p",{className:"text-xl font-semibold leading-tight ".concat("complete"===(a=e.status)?"text-white":"active"===a?"text-blue-100":"text-slate-300"),children:e.label}),e.description?(0,s.jsx)("p",{className:"mt-1 text-sm leading-relaxed text-slate-400",children:e.description}):null]},e.id)})})]}),(0,s.jsxs)("section",{className:"streamer-card-soft mt-5 rounded-xl p-3",children:[(0,s.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-[var(--streamer-muted)]",children:"Status"}),(0,s.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-white/10 bg-slate-950/55 px-3 py-2",children:[(0,s.jsx)("span",{className:"text-sm text-slate-300",children:"Campaign"}),(d="available",(0,s.jsx)("span",{className:"rounded-full px-2 py-1 text-xs font-semibold uppercase tracking-wide ".concat("bg-sky-500/20 text-sky-200"),children:d}))]}),(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-white/10 bg-slate-950/55 px-3 py-2",children:[(0,s.jsx)("span",{className:"text-sm text-slate-300",children:"Overlay"}),(0,s.jsx)("span",{"data-testid":"overlay-status-badge",className:"rounded-full px-2 py-1 text-xs font-semibold uppercase tracking-wide ".concat(o?"bg-emerald-500/20 text-emerald-200":"bg-rose-500/20 text-rose-200"),children:o?"connected":"not connected"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-white/10 bg-slate-950/55 px-3 py-2",children:[(0,s.jsx)("span",{className:"text-sm text-slate-300",children:"Overlay service"}),(0,s.jsx)("span",{className:"rounded-full px-2 py-1 text-xs font-semibold uppercase tracking-wide ".concat((null===(a=e.flowState)||void 0===a?void 0:a.overlayServiceEnabled)?"bg-emerald-500/20 text-emerald-200":"bg-rose-500/20 text-rose-200"),children:(null===(r=e.flowState)||void 0===r?void 0:r.overlayServiceEnabled)?"enabled":"disabled"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-white/10 bg-slate-950/55 px-3 py-2",children:[(0,s.jsx)("span",{className:"text-sm text-slate-300",children:"Placement mode"}),(0,s.jsx)("span",{className:"rounded-full bg-slate-700/40 px-2 py-1 text-xs font-semibold uppercase tracking-wide text-slate-200",children:null!==(n=null===(l=e.flowState)||void 0===l?void 0:l.overlayPlacementMode)&&void 0!==n?n:"automatic"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-white/10 bg-slate-950/55 px-3 py-2",children:[(0,s.jsx)("span",{className:"text-sm text-slate-300",children:"Requirements"}),(0,s.jsx)("span",{"data-testid":"requirements-status-badge",className:"rounded-full px-2 py-1 text-xs font-semibold uppercase tracking-wide ".concat(e.uiState.requirementsCompleted?"bg-emerald-500/20 text-emerald-200":"bg-amber-500/20 text-amber-200"),children:e.uiState.requirementsCompleted?"completed":"pending"})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-white/10 bg-slate-950/55 px-3 py-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-slate-300",children:"Live warmup"}),(0,s.jsxs)("span",{className:"text-xs font-semibold text-slate-200","data-testid":"live-progress-value",children:[e.uiState.liveMinutes,"/20m"]})]}),(0,s.jsx)("div",{className:"mt-2 h-1.5 rounded-full bg-slate-900/70",children:(0,s.jsx)("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-cyan-400 to-blue-400 transition-all",style:{width:"".concat(m,"%")}})})]})]}),(0,s.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[(0,s.jsx)("button",{type:"button",className:"rounded-lg border border-white/15 bg-slate-900/65 px-2 py-2 text-xs font-medium text-slate-200 transition hover:border-white/30 disabled:cursor-not-allowed disabled:opacity-60",onClick:e.onToggleOverlay,"aria-label":"Toggle overlay from right rail",disabled:!e.uiState.joined,children:"Toggle overlay"}),(0,s.jsx)("button",{type:"button",className:"rounded-lg border border-white/15 bg-slate-900/65 px-2 py-2 text-xs font-medium text-slate-200 transition hover:border-white/30 disabled:cursor-not-allowed disabled:opacity-60",onClick:e.onToggleRequirements,"aria-label":"Toggle requirements from right rail",disabled:!e.uiState.joined,children:"Toggle requirements"})]}),(0,s.jsx)("button",{type:"button",className:"mt-2 w-full rounded-lg border border-cyan-300/35 bg-cyan-500/10 px-2 py-2 text-xs font-medium uppercase tracking-wide text-cyan-100 transition hover:border-cyan-300/70 disabled:cursor-not-allowed disabled:opacity-60",onClick:e.onSimulateLiveProgress,"aria-label":"Simulate five minutes live",disabled:!e.uiState.joined||!o||e.uiState.liveMinutes>=20,children:"Simulate +5m live"})]}),(0,s.jsxs)("section",{className:"streamer-card-soft mt-4 rounded-xl p-3",children:[(0,s.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-[var(--streamer-muted)]",children:"Proof timeline"}),(0,s.jsx)("ul",{className:"mt-3 space-y-2","data-testid":"proof-timeline-list",children:e.activityLog.slice(0,5).map(e=>(0,s.jsxs)("li",{className:"rounded-lg border border-white/10 bg-black/25 px-3 py-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-slate-100",children:e.title}),(0,s.jsxs)("p",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:[new Date(e.ts).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZone:"UTC"})," UTC"]})]}),(0,s.jsx)("p",{className:"mt-1 text-xs text-slate-300",children:e.detail})]},e.id))})]})]})}function x(e){var t;return(0,s.jsx)("article",{className:"streamer-card rounded-2xl p-5 ".concat(null!==(t=e.className)&&void 0!==t?t:""),children:e.children})}function u(e){return(0,s.jsxs)("div",{className:"streamer-card-soft rounded-xl p-3",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.18em] text-[var(--streamer-muted)]",children:e.label}),(0,s.jsx)("p",{className:"mt-2 text-3xl font-semibold ".concat("accent"===e.tone?"text-emerald-300":"text-white"),children:e.value})]})}function p(e){var t,a;let r=e.data.configuration.slots.find(t=>t.id===e.uiState.selectedOverlaySlot),[i,n]=(0,l.useState)(e.data.requirements.banner.destinationUrl),[d,o]=(0,l.useState)("idle"),c=new Set(e.uiState.completedRequirementIds),m=e.uiState.completedRequirementIds.length,p=e.data.requirements.items.length,b=async()=>{if(e.uiState.generatedChatLink){if("undefined"==typeof navigator||!navigator.clipboard){o("unavailable");return}await navigator.clipboard.writeText(e.uiState.generatedChatLink),o("copied")}};return"general"===e.uiState.activeSection?(0,s.jsxs)("section",{className:"space-y-4","data-testid":"streamer-section-general",children:[(0,s.jsxs)(x,{children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.24em] text-[var(--streamer-muted)]",children:"General"}),(0,s.jsx)("h2",{className:"mt-2 text-3xl font-semibold text-white",children:"Campaign snapshot"}),(0,s.jsx)("p",{className:"mt-3 text-base leading-relaxed text-slate-200",children:e.data.summary}),(0,s.jsxs)("div",{className:"mt-4 inline-flex items-center rounded-full border border-white/15 bg-black/25 px-3 py-1 text-xs text-slate-300",children:["Advertiser: ",e.data.advertiser]})]}),(0,s.jsxs)(x,{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Timeframe"}),(0,s.jsxs)("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:[(0,s.jsx)(u,{label:"Campaign start",value:e.data.timeframe.start}),(0,s.jsx)(u,{label:"Campaign end",value:e.data.timeframe.end})]})]}),(0,s.jsxs)(x,{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Revenue"}),(0,s.jsxs)("div",{className:"mt-4 grid gap-3 sm:grid-cols-3",children:[(0,s.jsx)(u,{label:"Earned",value:e.data.revenue.earned,tone:"accent"}),(0,s.jsx)(u,{label:"Pay per display",value:e.data.revenue.perDisplay,tone:"accent"}),(0,s.jsx)(u,{label:"Potential",value:e.data.revenue.potential,tone:"accent"})]})]}),(0,s.jsxs)(x,{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Ad displays"}),(0,s.jsxs)("div",{className:"mt-4 grid gap-3 sm:grid-cols-3",children:[(0,s.jsx)(u,{label:"Completed",value:e.data.adDisplays.completed}),(0,s.jsx)(u,{label:"Daily cap",value:e.data.adDisplays.dailyLimit}),(0,s.jsx)(u,{label:"Total cap",value:e.data.adDisplays.totalLimit})]})]})]}):"brief"===e.uiState.activeSection?(0,s.jsxs)("section",{className:"space-y-4","data-testid":"streamer-section-brief",children:[(0,s.jsxs)(x,{children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.24em] text-[var(--streamer-muted)]",children:"Brief"}),(0,s.jsx)("h2",{className:"mt-2 text-3xl font-semibold text-white",children:e.data.brief.headline}),(0,s.jsx)("ul",{className:"mt-4 list-disc space-y-3 pl-6 text-base leading-relaxed text-slate-100",children:e.data.brief.talkingPoints.map(e=>(0,s.jsx)("li",{children:e},e))})]}),(0,s.jsxs)(x,{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Reminder checklist"}),(0,s.jsx)("ul",{className:"mt-4 space-y-2",children:e.data.brief.reminders.map(e=>(0,s.jsxs)("li",{className:"streamer-card-soft flex items-start gap-2 rounded-lg p-3 text-sm text-slate-200",children:[(0,s.jsx)("span",{className:"mt-0.5 inline-flex h-5 w-5 items-center justify-center rounded-full border border-white/20 bg-black/30 text-xs",children:"v"}),(0,s.jsx)("span",{children:e})]},e))})]})]}):"requirements"===e.uiState.activeSection?(0,s.jsxs)("section",{className:"space-y-4","data-testid":"streamer-section-requirements",children:[(0,s.jsxs)(x,{children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.24em] text-[var(--streamer-muted)]",children:"Requirement progress"}),(0,s.jsxs)("p",{className:"mt-2 text-2xl font-semibold text-white",children:[m,"/",p," completed"]}),(0,s.jsx)("div",{className:"mt-3 h-2 rounded-full bg-slate-900/70",children:(0,s.jsx)("div",{className:"h-2 rounded-full bg-gradient-to-r from-emerald-400 to-cyan-400 transition-all",style:{width:"".concat(0===p?0:m/p*100,"%")}})})]}),e.data.requirements.items.map(t=>{let a=c.has(t.id);return(0,s.jsxs)(x,{children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,s.jsx)("span",{className:"inline-flex rounded-md border px-2 py-1 text-xs font-semibold uppercase tracking-wide ".concat(a?"border-emerald-300/35 bg-emerald-500/15 text-emerald-100":"border-blue-300/30 bg-blue-500/15 text-blue-100"),children:a?"completed":t.statusLabel}),(0,s.jsx)("button",{type:"button",className:"rounded-lg border px-3 py-1.5 text-xs font-semibold transition disabled:cursor-not-allowed disabled:opacity-60 ".concat(a?"border-emerald-300/40 bg-emerald-500/10 text-emerald-100":"border-white/20 bg-slate-950/35 text-slate-100"),onClick:()=>e.onToggleRequirementItem(t.id),disabled:!e.uiState.joined,"aria-label":"Toggle requirement ".concat(t.id),children:a?"Mark pending":"Mark complete"})]}),(0,s.jsx)("h3",{className:"mt-3 text-2xl font-semibold text-white",children:t.title}),(0,s.jsx)("p",{className:"mt-2 text-base text-slate-200",children:t.description})]},t.id)}),(0,s.jsxs)(x,{children:[(0,s.jsx)("h3",{className:"text-2xl font-semibold text-white",children:e.data.requirements.banner.title}),(0,s.jsx)("div",{className:"mt-3 rounded-lg border border-blue-300/30 bg-blue-950/35 px-4 py-3 text-sm text-blue-100",children:e.data.requirements.banner.info}),(0,s.jsxs)("div",{className:"mt-4 grid gap-4 md:grid-cols-[minmax(0,1fr)_250px]",children:[(0,s.jsx)("div",{children:(0,s.jsx)("a",{href:e.data.requirements.banner.destinationUrl,target:"_blank",rel:"noreferrer",className:"inline-flex items-center rounded-lg border border-blue-200/30 bg-blue-900/35 px-4 py-2 text-sm font-semibold text-blue-100 transition hover:border-blue-200/60",children:e.data.requirements.banner.cta})}),(0,s.jsx)("div",{children:(0,s.jsx)("img",{src:e.data.requirements.banner.imageUrl,alt:e.data.requirements.banner.imageAlt,className:"h-64 w-full rounded-xl border border-white/15 object-cover"})})]}),(0,s.jsx)("button",{type:"button",className:"mt-5 rounded-lg border px-4 py-2 text-sm font-semibold transition disabled:cursor-not-allowed disabled:opacity-60 ".concat(e.uiState.requirementsCompleted?"border-emerald-300/40 bg-emerald-500/15 text-emerald-200":"border-amber-300/40 bg-amber-500/10 text-amber-200"),onClick:e.onToggleRequirements,"aria-label":"Toggle requirements from requirements section",disabled:!e.uiState.joined,children:e.uiState.joined?e.uiState.requirementsCompleted?"Mark requirements pending":"Mark requirements complete":"Join campaign to update requirement status"})]})]}):"stream-content"===e.uiState.activeSection?(0,s.jsxs)("section",{className:"space-y-4","data-testid":"streamer-section-stream-content",children:[(0,s.jsx)("div",{className:"rounded-xl border border-emerald-300/35 bg-emerald-950/40 px-4 py-3 text-sm font-medium text-emerald-100",children:e.data.streamContent.activationNotice}),e.setupCompleted?null:(0,s.jsx)("div",{className:"rounded-xl border border-amber-300/35 bg-amber-500/10 px-4 py-3 text-sm text-amber-100",children:"OBS setup is not completed yet. Visit setup to enable overlay tests and activate stable delivery."}),(0,s.jsxs)(x,{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-[var(--streamer-muted)]",children:"Message"}),(0,s.jsxs)("div",{className:"mt-3 border-l-2 border-cyan-300 bg-white/[0.03] px-4 py-3",children:[(0,s.jsx)("p",{className:"text-xl font-semibold text-white",children:e.data.streamContent.messageTitle}),(0,s.jsx)("p",{className:"mt-2 text-base leading-relaxed text-slate-200",children:e.data.streamContent.messageBody})]})]}),(0,s.jsxs)(x,{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-[var(--streamer-muted)]",children:"Command"}),(0,s.jsxs)("div",{className:"mt-3 border-l-2 border-cyan-300 bg-white/[0.03] px-4 py-3",children:[(0,s.jsx)("p",{className:"text-xl font-semibold text-white",children:e.data.streamContent.commandTitle}),(0,s.jsx)("p",{className:"mt-2 text-base leading-relaxed text-slate-200",children:e.data.streamContent.commandBody})]})]}),(0,s.jsxs)(x,{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-[var(--streamer-muted)]",children:"Chat CTA shortlink"}),(0,s.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,s.jsx)("label",{className:"text-xs uppercase tracking-[0.18em] text-[var(--streamer-muted)]",htmlFor:"chat-destination-url",children:"Destination URL"}),(0,s.jsx)("input",{id:"chat-destination-url",type:"url",value:i,onChange:e=>n(e.target.value),className:"w-full rounded-lg border border-white/20 bg-black/30 px-3 py-2 text-sm text-white outline-none transition focus:border-cyan-300/70"}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{o("idle"),e.onGenerateChatLink(i)},className:"rounded-lg border border-cyan-300/35 bg-cyan-500/15 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-cyan-100 transition hover:border-cyan-300/70","aria-label":"Generate chat cta link",children:"Generate tracked link"}),(0,s.jsx)("button",{type:"button",onClick:b,className:"rounded-lg border border-white/20 bg-slate-950/40 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-slate-100 transition hover:border-white/40 disabled:opacity-50",disabled:!e.uiState.generatedChatLink,"aria-label":"Copy generated chat link",children:"Copy link"}),"copied"===d?(0,s.jsx)("span",{className:"text-xs text-emerald-300",children:"Copied"}):null,"unavailable"===d?(0,s.jsx)("span",{className:"text-xs text-amber-200",children:"Clipboard not available"}):null]}),(0,s.jsxs)("div",{className:"streamer-card-soft rounded-lg p-3",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.18em] text-[var(--streamer-muted)]",children:"Generated link"}),(0,s.jsx)("p",{className:"mt-2 break-all text-sm text-slate-200","data-testid":"generated-chat-link",children:null!==(t=e.uiState.generatedChatLink)&&void 0!==t?t:"No link generated yet."})]})]})]}),(0,s.jsxs)(x,{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-[var(--streamer-muted)]",children:"Overlay"}),(0,s.jsx)("h3",{className:"mt-2 text-lg font-semibold text-white",children:e.data.streamContent.overlayPreviewTitle}),(0,s.jsxs)("div",{className:"mt-3 grid gap-4 md:grid-cols-[260px_minmax(0,1fr)]",children:[(0,s.jsx)("div",{children:(0,s.jsx)("img",{src:e.data.streamContent.overlayPreviewImageUrl,alt:e.data.streamContent.overlayPreviewImageAlt,className:"h-72 w-full rounded-xl border border-white/15 object-cover"})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("button",{type:"button",className:"rounded-xl border border-white/20 bg-slate-950/45 px-5 py-3 text-sm font-semibold text-slate-100 transition hover:border-white/40 disabled:cursor-not-allowed disabled:opacity-60",onClick:e.onToggleOverlay,"aria-label":"Toggle overlay from stream content section",disabled:!e.uiState.joined||!e.setupCompleted,children:e.uiState.joined?e.setupCompleted?e.uiState.overlayConnected?"Disconnect overlay":"Test on overlay":"Complete setup to test overlay":"Join campaign to test overlay"}),(0,s.jsxs)("div",{className:"streamer-card-soft rounded-xl p-3",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.18em] text-[var(--streamer-muted)]",children:"Title"}),(0,s.jsx)("p",{className:"mt-1 text-2xl font-semibold text-white",children:e.data.streamContent.sampleTitle})]}),(0,s.jsxs)("div",{className:"streamer-card-soft rounded-xl p-3",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.18em] text-[var(--streamer-muted)]",children:"Overlay status"}),(0,s.jsx)("p",{className:"mt-1 text-base font-semibold ".concat(e.uiState.overlayConnected?"text-emerald-200":"text-rose-200"),children:e.uiState.overlayConnected?"Connected and receiving commands":"Not connected"})]})]})]})]})]}):(0,s.jsx)("section",{className:"space-y-4","data-testid":"streamer-section-configuration",children:(0,s.jsxs)(x,{children:[(0,s.jsx)("h2",{className:"text-3xl font-semibold text-white",children:"Overlay position"}),(0,s.jsx)("div",{className:"mt-3 rounded-lg border border-blue-300/30 bg-blue-950/35 px-4 py-3 text-sm text-blue-100",children:e.data.configuration.guidance}),(0,s.jsx)("div",{className:"mt-4 rounded-2xl border border-white/20 bg-black/25 p-3",children:(0,s.jsx)("div",{className:"grid gap-3 sm:grid-cols-3",children:e.data.configuration.slots.map(t=>{let a=e.uiState.selectedOverlaySlot===t.id;return(0,s.jsxs)("button",{type:"button","data-testid":"overlay-slot-".concat(t.id),className:"relative h-28 rounded-xl border-2 transition ".concat(a?"border-blue-300 bg-blue-500/55 text-white shadow-[0_0_0_1px_rgba(125,211,252,0.6)]":"border-dashed border-white/25 bg-slate-900/40 text-slate-300 hover:border-white/45"),onClick:()=>e.onSelectOverlaySlot(t.id),children:[(0,s.jsx)("span",{className:"absolute left-2 top-2 rounded-full bg-black/40 px-2 py-1 text-xs",children:t.label}),(0,s.jsx)("span",{className:"text-2xl font-semibold","aria-hidden":"true",children:a?"o":"+"})]},t.id)})})}),(0,s.jsxs)("p",{className:"mt-4 text-sm text-slate-300","data-testid":"selected-overlay-slot",children:["Selected position: ",(0,s.jsx)("span",{className:"font-semibold text-white",children:null!==(a=null==r?void 0:r.label)&&void 0!==a?a:"None"})]})]})})}let b={joined:!1,overlayConnected:!1,requirementsCompleted:!1,completedRequirementIds:[],liveMinutes:0,activeSection:"general",selectedOverlaySlot:4,generatedChatLink:null,isPaused:!1};function h(e){var t;let{state:a,setState:o}=(0,n.xA)(),[x,u]=(0,l.useState)(null!==(t=e.campaignId)&&void 0!==t?t:null);(0,l.useEffect)(()=>{if(e.campaignId){u(e.campaignId);return}let t=new URLSearchParams(window.location.search).get("campaign");t&&u(t)},[e.campaignId]);let h=(0,l.useMemo)(()=>{var t;return null!==(t=e.data)&&void 0!==t?t:(0,i.j$)(null!=x?x:a.selectedCampaignId)},[a.selectedCampaignId,e.data,x]),g=a.joinedCampaignIds.includes(h.campaignId),v=!h.requiresSetup||a.setupCompleted,[f,j]=(0,l.useState)({...b,joined:g,overlayConnected:a.overlayConnected}),[y,w]=(0,l.useState)([{id:"boot",ts:new Date().toISOString(),title:"Workspace initialized",detail:"Frontend demo mode active, no backend writes."}]),N=(0,l.useMemo)(()=>h.requirements.items.map(e=>e.id),[h.requirements.items]),k=(0,l.useMemo)(()=>(function(e){let t=e.overlayConnected&&e.liveMinutes>=20,a=e.joined&&t&&e.requirementsCompleted,s=a&&e.isPaused;return[{id:"join",label:"Join campaign",status:e.joined?"complete":"pending"},{id:"go-live",label:"Go live",description:"Campaign activates after 20 minutes of stable overlay heartbeat (".concat(e.liveMinutes,"/20 min)"),status:t?"complete":e.joined?"active":"pending"},{id:"requirements",label:"Complete requirements",status:e.requirementsCompleted?"complete":e.joined?"active":"pending"},{id:"review",label:"Wait for review",status:s?"complete":a?"active":"pending"},{id:"paid",label:"Get paid",status:s?"active":"pending"}]})(f),[f]);(0,l.useEffect)(()=>{j(e=>({...e,joined:g,overlayConnected:a.overlayConnected}))},[g,a.overlayConnected]),(0,l.useEffect)(()=>{a.selectedCampaignId!==h.campaignId&&o(e=>({...e,selectedCampaignId:h.campaignId}))},[h.campaignId,a.selectedCampaignId,o]);let C=(e,t)=>{w(a=>[{id:"".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,8)),ts:new Date().toISOString(),title:e,detail:t},...a].slice(0,12))},S=()=>{if(!g||!v)return;if(!a.overlayServiceEnabled){C("Overlay service disabled","Enable overlay service in settings before connecting.");return}let e=!f.overlayConnected;j(t=>({...t,overlayConnected:e,liveMinutes:e?t.liveMinutes:0})),o(t=>({...t,overlayConnected:e})),C(e?"Overlay connected":"Overlay disconnected",e?"Heartbeat stream resumed.":"Warmup timer reset.")},q=()=>{if(!g)return;let e=!f.requirementsCompleted;j(t=>({...t,requirementsCompleted:e,completedRequirementIds:e?N:[]})),C(e?"Requirements completed":"Requirements marked pending",e?"All checklist items were marked complete.":"Checklist was reset for follow-up.")};return g?(0,s.jsx)("main",{className:"streamer-theme min-h-screen px-3 py-3 md:px-4 xl:px-6",children:(0,s.jsxs)("div",{className:"streamer-frame mx-auto max-w-[1700px] rounded-3xl border border-white/10 p-3 md:p-4",children:[(0,s.jsxs)("div",{className:"mb-4 flex flex-wrap gap-2",children:[(0,s.jsx)(r.default,{href:"/streamer",className:"rounded-lg border border-cyan-300/30 bg-slate-950/45 px-3 py-2 text-xs font-semibold uppercase tracking-wide text-cyan-100 transition hover:border-cyan-300/60",children:"Back to sponsorships"}),(0,s.jsx)(r.default,{href:"/streamer/setup",className:"rounded-lg border border-emerald-300/35 bg-emerald-500/10 px-3 py-2 text-xs font-semibold uppercase tracking-wide text-emerald-100 transition hover:border-emerald-300/70",children:"OBS setup"})]}),v?null:(0,s.jsxs)("div",{className:"mb-4 rounded-xl border border-amber-300/35 bg-amber-500/10 px-4 py-3 text-sm text-amber-100","data-testid":"workspace-setup-guard",children:["Complete OBS setup to unlock overlay testing and stable campaign delivery.",(0,s.jsx)(r.default,{href:"/streamer/setup",className:"ml-2 font-semibold underline",children:"Open setup"})]}),a.overlayServiceEnabled?null:(0,s.jsxs)("div",{className:"mb-4 rounded-xl border border-rose-300/35 bg-rose-500/10 px-4 py-3 text-sm text-rose-100","data-testid":"workspace-overlay-service-guard",children:["Overlay service is disabled in settings. Enable it before going live.",(0,s.jsx)(r.default,{href:"/streamer/settings",className:"ml-2 font-semibold underline",children:"Open settings"})]}),(0,s.jsx)("header",{className:"mb-4 rounded-2xl border border-white/10 bg-black/30 p-4",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-end justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-3 flex items-center gap-3",children:[(0,s.jsx)("span",{className:"streamer-brand-mark-shell inline-flex items-center justify-center rounded-xl border border-cyan-300/30 bg-cyan-500/10 p-1.5",children:(0,s.jsx)(d.BrandLogo,{kind:"mark",surface:"dark",size:"sm",className:"streamer-brand-logo streamer-brand-logo--mark"})}),(0,s.jsx)(d.BrandLogo,{kind:"horizontal",surface:"dark",size:"sm",dataTestId:"streamer-workspace-logo",className:"streamer-brand-logo streamer-brand-logo--horizontal"})]}),(0,s.jsx)("p",{className:"inline-flex rounded-full border border-cyan-300/35 bg-cyan-500/10 px-3 py-1 text-xs uppercase tracking-[0.24em] text-cyan-100",children:"Streamer workspace"}),(0,s.jsx)("h2",{className:"mt-2 text-2xl font-semibold tracking-tight text-white",children:"Live campaign operations"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-slate-300",children:"Beta Ads live control mode, local state only, no backend writes."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm sm:min-w-[260px]",children:[(0,s.jsxs)("div",{className:"streamer-pill rounded-xl px-3 py-2",children:[(0,s.jsx)("p",{className:"text-[10px] uppercase tracking-[0.18em] text-[var(--streamer-muted)]",children:"Time"}),(0,s.jsx)("p",{className:"mt-1 font-semibold text-white",children:"UTC"})]}),(0,s.jsxs)("div",{className:"streamer-pill rounded-xl px-3 py-2",children:[(0,s.jsx)("p",{className:"text-[10px] uppercase tracking-[0.18em] text-[var(--streamer-muted)]",children:"Impression rule"}),(0,s.jsx)("p",{className:"mt-1 font-semibold text-white",children:"ad_completed"})]})]})]})}),(0,s.jsxs)("div",{className:"grid gap-4 xl:grid-cols-[220px_minmax(0,1fr)_300px]","data-testid":"streamer-grid",children:[(0,s.jsx)(c,{campaignId:h.campaignId,campaignTitle:h.campaignTitle,activeSection:f.activeSection,onSelect:e=>j(t=>({...t,activeSection:e}))}),(0,s.jsx)("section",{className:"order-2 space-y-4 xl:order-none","data-testid":"streamer-main-column",children:(0,s.jsx)(p,{data:h,uiState:f,setupCompleted:v,onToggleRequirementItem:e=>{g&&(j(t=>{let a=t.completedRequirementIds.includes(e)?t.completedRequirementIds.filter(t=>t!==e):[...t.completedRequirementIds,e],s=N.length>0&&a.length===N.length;return{...t,completedRequirementIds:a,requirementsCompleted:s}}),C("Requirement updated","Checklist item ".concat(e," toggled.")))},onGenerateChatLink:e=>{if(g)try{let t=function(e,t){let a=new URL(e),s="crypto"in window&&"function"==typeof window.crypto.randomUUID?window.crypto.randomUUID().slice(0,8):"".concat(Date.now().toString(36)).concat(Math.random().toString(36).slice(2,6));return a.searchParams.set("utm_source","twitch_chat"),a.searchParams.set("utm_medium","streamer_cta"),a.searchParams.set("utm_campaign",t),a.searchParams.set("beta_ref",s),a.toString()}(e,h.campaignId);j(e=>({...e,generatedChatLink:t})),C("Chat CTA link generated","Tracked link created for chat command usage.")}catch(e){C("Chat CTA link failed","Destination URL was invalid.")}},onToggleOverlay:S,onToggleRequirements:q,onSelectOverlaySlot:e=>{j(t=>({...t,selectedOverlaySlot:e})),C("Overlay slot selected","Primary slot changed to ".concat(e,"."))}})}),(0,s.jsx)(m,{uiState:f,flowState:a,workflowSteps:k,activityLog:y,onPrimaryAction:()=>{if(!g)return;let e=!f.isPaused;j(t=>({...t,isPaused:e})),C(e?"Campaign paused":"Campaign resumed",e?"Review stage can finalize.":"Live operations resumed.")},onSimulateLiveProgress:()=>{if(!g||!f.overlayConnected)return;let e=Math.min(20,f.liveMinutes+5);j(t=>({...t,liveMinutes:e})),C("Live warmup updated","Stable overlay time is now ".concat(e," of 20 minutes."))},onToggleOverlay:S,onToggleRequirements:q})]})]})}):(0,s.jsx)("main",{className:"streamer-theme min-h-screen px-3 py-3 md:px-4 xl:px-6",children:(0,s.jsx)("div",{className:"streamer-frame mx-auto max-w-[1700px] rounded-3xl border border-white/10 p-4",children:(0,s.jsxs)("div",{className:"rounded-2xl border border-amber-300/30 bg-amber-500/10 p-6","data-testid":"workspace-join-guard",children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-amber-200",children:"Campaign access blocked"}),(0,s.jsx)("h1",{className:"mt-3 text-3xl font-semibold text-white",children:h.campaignTitle}),(0,s.jsx)("p",{className:"mt-3 max-w-3xl text-base leading-relaxed text-amber-100/90",children:"Join this sponsorship from the marketplace first, then return to this workspace to manage live delivery and proof timelines."}),(0,s.jsxs)("div",{className:"mt-5 flex flex-wrap gap-2",children:[(0,s.jsx)(r.default,{href:"/streamer",className:"streamer-primary-btn rounded-xl px-4 py-2 text-sm font-semibold text-white transition",children:"Go to sponsorships"}),(0,s.jsx)(r.default,{href:"/streamer/setup",className:"rounded-xl border border-white/25 bg-slate-950/35 px-4 py-2 text-sm font-semibold text-slate-100 transition hover:border-white/40",children:"Open OBS setup"})]})]})})})}},9927:function(e,t,a){"use strict";a.d(t,{xA:function(){return c}});var s=a(374);let r="beta_streamer_flow_v1",l={providerConnected:!1,connectedProvider:null,setupCompleted:!1,overlayConnected:!1,joinedCampaignIds:[],selectedCampaignId:null,lastTestRunAt:null,overlayPlacementMode:"automatic",minimumCooldownMinutes:35,startDelayMinutes:20,overlayServiceEnabled:!0,darkModeEnabled:!0},i={...l,joinedCampaignIds:[]};function n(e){return{...e,joinedCampaignIds:[...e.joinedCampaignIds]}}function d(e){var t;if(!e||"object"!=typeof e)return n(l);let a=Array.from(new Set(Array.isArray(e.joinedCampaignIds)?e.joinedCampaignIds.filter(e=>"string"==typeof e):[]));return{providerConnected:!!e.providerConnected,connectedProvider:"twitch"===(t=e.connectedProvider)||"youtube"===t||"kick"===t?e.connectedProvider:null,setupCompleted:!!e.setupCompleted,overlayConnected:!!e.overlayConnected,joinedCampaignIds:a,selectedCampaignId:"string"==typeof e.selectedCampaignId?e.selectedCampaignId:null,lastTestRunAt:"string"==typeof e.lastTestRunAt?e.lastTestRunAt:null,overlayPlacementMode:"manual"===e.overlayPlacementMode?"manual":"automatic",minimumCooldownMinutes:"number"==typeof e.minimumCooldownMinutes&&Number.isFinite(e.minimumCooldownMinutes)?Math.min(60,Math.max(10,Math.round(e.minimumCooldownMinutes))):l.minimumCooldownMinutes,startDelayMinutes:"number"==typeof e.startDelayMinutes&&Number.isFinite(e.startDelayMinutes)?Math.min(60,Math.max(5,Math.round(e.startDelayMinutes))):l.startDelayMinutes,overlayServiceEnabled:"boolean"==typeof e.overlayServiceEnabled?e.overlayServiceEnabled:l.overlayServiceEnabled,darkModeEnabled:"boolean"==typeof e.darkModeEnabled?e.darkModeEnabled:l.darkModeEnabled}}function o(e){let t=d(e);i=n(t);try{window.localStorage.setItem(r,JSON.stringify(t))}catch(e){}}function c(){let[e,t]=(0,s.useState)(()=>(function(){try{let e=window.localStorage.getItem(r);if(!e)return n(i);let t=JSON.parse(e),a=d(t);return i=n(a),a}catch(e){return n(i)}})()),a=(0,s.useCallback)(e=>{t(t=>{let a=d("function"==typeof e?e(t):e);return o(a),a})},[]),c=(0,s.useCallback)(()=>{let e=n(l);o(e),t(e)},[]);return(0,s.useMemo)(()=>({state:e,setState:a,resetState:c}),[c,e,a])}},3639:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var s=a(3613),r=a.n(s)}},function(e){e.O(0,[613,94,405,371,560],function(){return e(e.s=6490)}),_N_E=e.O()}]);